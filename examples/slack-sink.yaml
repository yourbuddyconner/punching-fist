# Example Sink for sending enriched alerts to Slack
apiVersion: punchingfist.io/v1alpha1
kind: Sink
metadata:
  name: slack-ops-channel
  namespace: punchingfist-system
spec:
  type: slack
  config:
    channel: "#ops-alerts"
    # Bot token should be stored in a Kubernetes secret
    botToken: "slack-bot-token-secret"
    messageType: "message"
    mentionUsers: ["@oncall"]
    template: |
      ğŸš¨ *Alert Investigation Complete*
      
      *Alert:* `{{ .source.data.alert.alertname }}`
      *Severity:* {{ .workflow.outputs.severity_assessment }}
      *Summary:* {{ .source.data.alert.summary }}
      
      ğŸ” *Investigation Results:*
      {{ .workflow.outputs.investigation_summary }}
      
      ğŸ¯ *Root Cause:*
      {{ .workflow.outputs.root_cause }}
      
      {{ if .workflow.outputs.auto_resolved }}
      âœ… *Status:* Automatically Resolved
      {{ else }}
      âš ï¸ *Status:* Human Intervention Required
      
      ğŸ“‹ *Recommendations:*
      {{ .workflow.outputs.recommendations }}
      {{ end }}
      
      â±ï¸ *Investigation Duration:* {{ .workflow.duration }}
      ğŸ”— *Source:* {{ .source.name }} | *Workflow:* {{ .workflow.name }} 